---
import "../styles/home.css";
import Layout from "../layouts/Layout.astro";
import Navbar from "../components/Navbar.astro";
---

<Layout>
  <Navbar />
  <!-- MAIN CONTENT -->
  <main class="home-feed">
    <!-- Twitter-style Compose Section -->
    <section class="report-box">
      <form id="reportForm" method="post" action="">
        <div class="report-row">
          <div class="report-input-wrapper">
            <div class="avatar"></div>
            <div class="input-content">
              <textarea
                id="description"
                name="description"
                class="report-input"
                placeholder="What's lost or found?"
                required
                rows="1"
              ></textarea>
            </div>
          </div>
          
          <div class="report-controls">
            <div class="report-left-controls">
              <select
                id="itemCategory"
                name="category"
                class="report-select"
                required
              >
                <option value="">Category</option>
                <option value="phone">ðŸ“± Phone</option>
                <option value="id">ðŸ†” ID Card</option>
                <option value="bag">ðŸŽ’ Bag</option>
                <option value="wallet">ðŸ’° Wallet</option>
                <option value="other">ðŸ“¦ Other</option>
              </select>
              
              <label for="itemImage" class="image-upload-label" title="Add image">
                <img
                  src="https://cdn-icons-png.flaticon.com/512/1828/1828925.png"
                  alt="Upload"
                  class="image-upload-icon"
                />
                 <input
                  type="file"
                  id="itemImage"
                  name="itemImage"
                  accept="image/*"
                  class="report-file"
                  required
                  style="display:none;" 
                />
               
              </label>
               <span id="selectedImageName" class="selected-image-name"></span>
            </div>
            
            <div class="report-right-controls">
              <input
                type="text"
                id="contact"
                name="contact"
                class="contact-input"
                placeholder="Contact info"
                required
              />
              <button type="submit" class="send-btn">
                Post
              </button>
            </div>
          </div>
        </div>
      </form>
    </section>

    <!-- Popup for notifications -->
    <div id="popup" class="popup"></div>

    <!-- Search and Filter Section -->
    <section class="search-filter">
      <input type="text" id="searchInput" placeholder="Search reports..." />
      <select id="filterSelect">
        <option value="all">All Categories</option>
        <option value="phone">ðŸ“± Phone</option>
        <option value="id">ðŸ†” ID Card</option>
        <option value="bag">ðŸŽ’ Bag</option>
        <option value="wallet">ðŸ’° Wallet</option>
        <option value="other">ðŸ“¦ Other</option>
      </select>
    </section>

    <!-- Feed Section -->
    <section class="check">
      <main class="container" id="cover">
        <div id="loader" class="loader"></div>
      </main>
    </section>
  </main>

  <!-- SCRIPTS -->
   <script is:inline>
    const file = document.querySelector(".report-file");
    file?.addEventListener('change', function showSelectedImageName(e) {
    const fileInput = e.target;
    const nameSpan = document.getElementById("selectedImageName");
    if (fileInput.files && fileInput.files[0]) {
      nameSpan.textContent = fileInput.files[0].name;
    } else {
      nameSpan.textContent = "";
    }
  })
    

   </script>
  <script src="../scripts/explore.js"></script>
</Layout>